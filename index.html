

<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>xarray-dataclass &#8212; xarray-dataclass  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'index';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:version" content="">

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="#">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo-light.svg" class="logo__image only-light" alt="xarray-dataclass  documentation - Home"/>
    <img src="_static/logo-dark.svg" class="logo__image only-dark pst-js-only" alt="xarray-dataclass  documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="#">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://xarray.pydata.org/">
    xarray
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/xarray-contrib/xarray-dataclass/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://x.com/xarray_dev/" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/xarray-dataclass/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-box fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="#">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://xarray.pydata.org/">
    xarray
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/xarray-contrib/xarray-dataclass/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://x.com/xarray_dev/" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/xarray-dataclass/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-box fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none"></div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="xarray-dataclass">
<h1>xarray-dataclass<a class="headerlink" href="#xarray-dataclass" title="Link to this heading">#</a></h1>
<p><a class="reference external" href="https://pypi.org/project/xarray-dataclass/"><img alt="Release" src="https://img.shields.io/pypi/v/xarray-dataclass?label=Release&amp;color=cornflowerblue&amp;style=flat-square" /></a>
<a class="reference external" href="https://pypi.org/project/xarray-dataclass/"><img alt="Python" src="https://img.shields.io/pypi/pyversions/xarray-dataclass?label=Python&amp;color=cornflowerblue&amp;style=flat-square" /></a>
<a class="reference external" href="https://pepy.tech/project/xarray-dataclass"><img alt="Downloads" src="https://img.shields.io/pypi/dm/xarray-dataclass?label=Downloads&amp;color=cornflowerblue&amp;style=flat-square" /></a>
<a class="reference external" href="https://doi.org/10.5281/zenodo.16604747"><img alt="DOI" src="https://zenodo.org/badge/945912243.svg" /></a>
<a class="reference external" href="https://github.com/xarray-contrib/xarray-dataclass/actions/workflows/tests.yaml"><img alt="Tests" src="https://img.shields.io/github/actions/workflow/status/xarray-contrib/xarray-dataclass/tests.yml?label=Tests&amp;style=flat-square" /></a></p>
<p>xarray data creation by data classes</p>
<p>This repository is adapted from <a class="reference external" href="https://github.com/astropenguin/xarray-dataclasses">here</a>. We are grateful for the
work of the developer on this repo. Sadly, that repository is inactive. Thus, a fork was moved here in order to allow
for more visibility and community maintenance.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>xarray-dataclass is a Python package that makes it easy to create <a class="reference external" href="https://xarray.pydata.org/en/stable/index.html">xarray</a>’s DataArray and Dataset objects that are “typed” (i.e. fixed dimensions, data type, coordinates, attributes, and name) using <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html">the Python’s dataclass</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">xarray_dataclass</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsDataArray</span><span class="p">,</span> <span class="n">Coord</span><span class="p">,</span> <span class="n">Data</span>


<span class="n">X</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Image</span><span class="p">(</span><span class="n">AsDataArray</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;2D image as DataArray.&quot;&quot;&quot;</span>

    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<section id="features">
<h3>Features<a class="headerlink" href="#features" title="Link to this heading">#</a></h3>
<ul>
<li><p>Typed DataArray or Dataset objects can easily be created:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><p>NumPy-like filled-data creation is also available:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><p>Support for features by <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html">the Python’s dataclass</a> (<code class="docutils literal notranslate"><span class="pre">field</span></code>, <code class="docutils literal notranslate"><span class="pre">__post_init__</span></code>, …).</p></li>
<li><p>Support for static type check by <a class="reference external" href="https://github.com/microsoft/pyright">Pyright</a>.</p></li>
</ul>
</section>
<section id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Link to this heading">#</a></h3>
<p>There are multiple ways you can install xarray-dataclass, dependent on what kind of dependency manager you use.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>xarray-dataclass
pixi<span class="w"> </span>add<span class="w"> </span>--pypi<span class="w"> </span>xarray-dataclass
</pre></div>
</div>
</section>
</section>
<section id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Link to this heading">#</a></h2>
<p>xarray-dataclass uses <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html">the Python’s dataclass</a>.
Data (or data variables), coordinates, attributes, and a name of DataArray or Dataset objects will be defined as dataclass fields by special type hints (<code class="docutils literal notranslate"><span class="pre">Data</span></code>, <code class="docutils literal notranslate"><span class="pre">Coord</span></code>, <code class="docutils literal notranslate"><span class="pre">Attr</span></code>, <code class="docutils literal notranslate"><span class="pre">Name</span></code>), respectively.
Note that the following code is supposed in the examples below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">xarray_dataclass</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsDataArray</span><span class="p">,</span> <span class="n">AsDataset</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">xarray_dataclass</span><span class="w"> </span><span class="kn">import</span> <span class="n">Attr</span><span class="p">,</span> <span class="n">Coord</span><span class="p">,</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Name</span>


<span class="n">X</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>
</pre></div>
</div>
<section id="data-field">
<h3>Data field<a class="headerlink" href="#data-field" title="Link to this heading">#</a></h3>
<p>Data field is a field whose value will become the data of a DataArray object or a data variable of a Dataset object.
The type hint <code class="docutils literal notranslate"><span class="pre">Data[TDims,</span> <span class="pre">TDtype]</span></code> fixes the dimensions and the data type of the object.
Here are some examples of how to specify them.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Type hint</p></th>
<th class="head"><p>Inferred dimensions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Data[tuple[()],</span> <span class="pre">...]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Data[Literal[&quot;x&quot;],</span> <span class="pre">...]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(&quot;x&quot;,)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Data[tuple[Literal[&quot;x&quot;]],</span> <span class="pre">...]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(&quot;x&quot;,)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Data[tuple[Literal[&quot;x&quot;],</span> <span class="pre">Literal[&quot;y&quot;]],</span> <span class="pre">...]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(&quot;x&quot;,</span> <span class="pre">&quot;y&quot;)</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Type hint</p></th>
<th class="head"><p>Inferred data type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Data[...,</span> <span class="pre">Any]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Data[...,</span> <span class="pre">None]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Data[...,</span> <span class="pre">float]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">numpy.dtype(&quot;float64&quot;)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Data[...,</span> <span class="pre">numpy.float128]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">numpy.dtype(&quot;float128&quot;)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Data[...,</span> <span class="pre">Literal[&quot;datetime64[ns]&quot;]]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">numpy.dtype(&quot;&lt;M8[ns]&quot;)</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="coordinate-field">
<h3>Coordinate field<a class="headerlink" href="#coordinate-field" title="Link to this heading">#</a></h3>
<p>Coordinate field is a field whose value will become a coordinate of a DataArray or a Dataset object.
The type hint <code class="docutils literal notranslate"><span class="pre">Coord[TDims,</span> <span class="pre">TDtype]</span></code> fixes the dimensions and the data type of the object.</p>
</section>
<section id="attribute-field">
<h3>Attribute field<a class="headerlink" href="#attribute-field" title="Link to this heading">#</a></h3>
<p>Attribute field is a field whose value will become an attribute of a DataArray or a Dataset object.
The type hint <code class="docutils literal notranslate"><span class="pre">Attr[TAttr]</span></code> specifies the type of the value, which is used only for static type check.</p>
</section>
<section id="name-field">
<h3>Name field<a class="headerlink" href="#name-field" title="Link to this heading">#</a></h3>
<p>Name field is a field whose value will become the name of a DataArray object.
The type hint <code class="docutils literal notranslate"><span class="pre">Name[TName]</span></code> specifies the type of the value, which is used only for static type check.</p>
</section>
<section id="dataarray-class">
<h3>DataArray class<a class="headerlink" href="#dataarray-class" title="Link to this heading">#</a></h3>
<p>DataArray class is a dataclass that defines typed DataArray specifications.
Exactly one data field is allowed in a DataArray class.
The second and subsequent data fields are just ignored in DataArray creation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Image</span><span class="p">(</span><span class="n">AsDataArray</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;2D image as DataArray.&quot;&quot;&quot;</span>

    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">units</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;cd / m^2&quot;</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Name</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;luminance&quot;</span>
</pre></div>
</div>
<p>A DataArray object will be created by a class method <code class="docutils literal notranslate"><span class="pre">new()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">DataArray</span> <span class="s2">&quot;luminance&quot;</span> <span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span><span class="o">&gt;</span>
<span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]])</span>
<span class="n">Coordinates</span><span class="p">:</span>
  <span class="o">*</span> <span class="n">x</span>        <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">1</span>
  <span class="o">*</span> <span class="n">y</span>        <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">Attributes</span><span class="p">:</span>
    <span class="n">units</span><span class="p">:</span>    <span class="n">cd</span> <span class="o">/</span> <span class="n">m</span><span class="o">^</span><span class="mi">2</span>
</pre></div>
</div>
<p>NumPy-like class methods (<code class="docutils literal notranslate"><span class="pre">zeros()</span></code>, <code class="docutils literal notranslate"><span class="pre">ones()</span></code>, …) are also available:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">DataArray</span> <span class="s2">&quot;luminance&quot;</span> <span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span><span class="o">&gt;</span>
<span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]])</span>
<span class="n">Coordinates</span><span class="p">:</span>
  <span class="o">*</span> <span class="n">x</span>        <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
  <span class="o">*</span> <span class="n">y</span>        <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="n">Attributes</span><span class="p">:</span>
    <span class="n">units</span><span class="p">:</span>    <span class="n">cd</span> <span class="o">/</span> <span class="n">m</span><span class="o">^</span><span class="mi">2</span>
</pre></div>
</div>
</section>
<section id="dataset-class">
<h3>Dataset class<a class="headerlink" href="#dataset-class" title="Link to this heading">#</a></h3>
<p>Dataset class is a dataclass that defines typed Dataset specifications.
Multiple data fields are allowed to define the data variables of the object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ColorImage</span><span class="p">(</span><span class="n">AsDataset</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;2D color image as Dataset.&quot;&quot;&quot;</span>

    <span class="n">red</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">green</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">blue</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">units</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;cd / m^2&quot;</span>
</pre></div>
</div>
<p>A Dataset object will be created by a class method <code class="docutils literal notranslate"><span class="pre">new()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ColorImage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
    <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>  <span class="c1"># red</span>
    <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>  <span class="c1"># green</span>
    <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>  <span class="c1"># blue</span>
<span class="p">)</span>

<span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="o">&gt;</span>
<span class="n">Dimensions</span><span class="p">:</span>  <span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Coordinates</span><span class="p">:</span>
  <span class="o">*</span> <span class="n">x</span>        <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">0</span>
  <span class="o">*</span> <span class="n">y</span>        <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="n">Data</span> <span class="n">variables</span><span class="p">:</span>
    <span class="n">red</span>      <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="mf">0.0</span>
    <span class="n">green</span>    <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">1.0</span>
    <span class="n">blue</span>     <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">2.0</span> <span class="mf">2.0</span> <span class="mf">2.0</span> <span class="mf">2.0</span>
<span class="n">Attributes</span><span class="p">:</span>
    <span class="n">units</span><span class="p">:</span>    <span class="n">cd</span> <span class="o">/</span> <span class="n">m</span><span class="o">^</span><span class="mi">2</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-usage">
<h2>Advanced usage<a class="headerlink" href="#advanced-usage" title="Link to this heading">#</a></h2>
<section id="coordof-and-dataof-type-hints">
<h3>Coordof and Dataof type hints<a class="headerlink" href="#coordof-and-dataof-type-hints" title="Link to this heading">#</a></h3>
<p>xarray-dataclass provides advanced type hints, <code class="docutils literal notranslate"><span class="pre">Coordof</span></code> and <code class="docutils literal notranslate"><span class="pre">Dataof</span></code>.
Unlike <code class="docutils literal notranslate"><span class="pre">Data</span></code> and <code class="docutils literal notranslate"><span class="pre">Coord</span></code>, they specify a dataclass that defines a DataArray class.
This is useful when users want to add metadata to dimensions for <a class="reference external" href="https://xarray.pydata.org/en/stable/user-guide/plotting.html#simple-example">plotting</a>.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">xarray_dataclass</span><span class="w"> </span><span class="kn">import</span> <span class="n">Coordof</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">XAxis</span><span class="p">:</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
    <span class="n">long_name</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;x axis&quot;</span>
    <span class="n">units</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pixel&quot;</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">YAxis</span><span class="p">:</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
    <span class="n">long_name</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;y axis&quot;</span>
    <span class="n">units</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pixel&quot;</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Image</span><span class="p">(</span><span class="n">AsDataArray</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;2D image as DataArray.&quot;&quot;&quot;</span>

    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coordof</span><span class="p">[</span><span class="n">XAxis</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coordof</span><span class="p">[</span><span class="n">YAxis</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</section>
<section id="general-data-variable-names-in-dataset-creation">
<h3>General data variable names in Dataset creation<a class="headerlink" href="#general-data-variable-names-in-dataset-creation" title="Link to this heading">#</a></h3>
<p>Due to the limitation of Python’s parameter names, it is not possible to define data variable names that contain white spaces, for example.
In such cases, please define DataArray classes of each data variable so that they have name fields and specify them by <code class="docutils literal notranslate"><span class="pre">Dataof</span></code> in a Dataset class.
Then the values of the name fields will be used as data variable names.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Red</span><span class="p">:</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Name</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Red image&quot;</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Green</span><span class="p">:</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Name</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Green image&quot;</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Blue</span><span class="p">:</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Name</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Blue image&quot;</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ColorImage</span><span class="p">(</span><span class="n">AsDataset</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;2D color image as Dataset.&quot;&quot;&quot;</span>

    <span class="n">red</span><span class="p">:</span> <span class="n">Dataof</span><span class="p">[</span><span class="n">Red</span><span class="p">]</span>
    <span class="n">green</span><span class="p">:</span> <span class="n">Dataof</span><span class="p">[</span><span class="n">Green</span><span class="p">]</span>
    <span class="n">blue</span><span class="p">:</span> <span class="n">Dataof</span><span class="p">[</span><span class="n">Blue</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ColorImage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
    <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
    <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
    <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
<span class="p">)</span>

<span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="o">&gt;</span>
<span class="n">Dimensions</span><span class="p">:</span>      <span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Dimensions</span> <span class="n">without</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
<span class="n">Data</span> <span class="n">variables</span><span class="p">:</span>
    <span class="n">Red</span> <span class="n">image</span>    <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="mf">0.0</span>
    <span class="n">Green</span> <span class="n">image</span>  <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">1.0</span>
    <span class="n">Blue</span> <span class="n">image</span>   <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">2.0</span> <span class="mf">2.0</span> <span class="mf">2.0</span> <span class="mf">2.0</span>
</pre></div>
</div>
</section>
<section id="customization-of-dataarray-or-dataset-creation">
<h3>Customization of DataArray or Dataset creation<a class="headerlink" href="#customization-of-dataarray-or-dataset-creation" title="Link to this heading">#</a></h3>
<p>For customization, users can add a special class attribute, <code class="docutils literal notranslate"><span class="pre">__dataoptions__</span></code>, to a DataArray or Dataset class.
A custom factory for DataArray or Dataset creation is only supported in the current implementation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">xarray_dataclass</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataOptions</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Custom</span><span class="p">(</span><span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Custom DataArray.&quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">custom_method</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Custom method.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Image</span><span class="p">(</span><span class="n">AsDataArray</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;2D image as DataArray.&quot;&quot;&quot;</span>

    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">__dataoptions__</span> <span class="o">=</span> <span class="n">DataOptions</span><span class="p">(</span><span class="n">Custom</span><span class="p">)</span>


<span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">Custom</span><span class="p">)</span>  <span class="c1"># True</span>
<span class="n">image</span><span class="o">.</span><span class="n">custom_method</span><span class="p">()</span>  <span class="c1"># True</span>
</pre></div>
</div>
</section>
<section id="dataarray-and-dataset-creation-without-shorthands">
<h3>DataArray and Dataset creation without shorthands<a class="headerlink" href="#dataarray-and-dataset-creation-without-shorthands" title="Link to this heading">#</a></h3>
<p>xarray-dataclass provides functions, <code class="docutils literal notranslate"><span class="pre">asdataarray</span></code> and <code class="docutils literal notranslate"><span class="pre">asdataset</span></code>.
This is useful when users do not want to inherit the mix-in class (<code class="docutils literal notranslate"><span class="pre">AsDataArray</span></code> or <code class="docutils literal notranslate"><span class="pre">AsDataset</span></code>) in a DataArray or Dataset dataclass.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">xarray_dataclass</span><span class="w"> </span><span class="kn">import</span> <span class="n">asdataarray</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Image</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;2D image as DataArray.&quot;&quot;&quot;</span>

    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>


<span class="n">image</span> <span class="o">=</span> <span class="n">asdataarray</span><span class="p">(</span><span class="n">Image</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</section>
</section>
<section id="how-to-contribute">
<h2>How to contribute<a class="headerlink" href="#how-to-contribute" title="Link to this heading">#</a></h2>
<p>Thank you for being willing to contribute! If you have some ideas to propose, please open an <a class="reference external" href="https://github.com/xarray-contrib/xarray-dataclass/issues">issue</a>.
We use <a class="reference external" href="https://docs.github.com/en/get-started/using-github/github-flow">GitHub flow</a> for developing and managing the project.
The first section describes how to contribute with it.
The second and third sections explain how to prepare a local development environment and our automated workflows in GitHub Actions, respectively.</p>
<section id="get-the-source-code">
<h3>Get the source code<a class="headerlink" href="#get-the-source-code" title="Link to this heading">#</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/xarray-contrib/xarray-dataclass
<span class="nb">cd</span><span class="w"> </span>xarray-dataclass
</pre></div>
</div>
</section>
<section id="install-dependencies">
<h3>Install dependencies<a class="headerlink" href="#install-dependencies" title="Link to this heading">#</a></h3>
<p>First install <a class="reference external" href="https://pixi.sh/latest/installation/">pixi</a>. Then, install project dependencies:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pixi<span class="w"> </span>install<span class="w"> </span>-a
pixi<span class="w"> </span>run<span class="w"> </span>-e<span class="w"> </span>dev<span class="w"> </span>pre-commit<span class="w"> </span>install
</pre></div>
</div>
</section>
<section id="testing-linting-and-formatting">
<h3>Testing, linting, and formatting<a class="headerlink" href="#testing-linting-and-formatting" title="Link to this heading">#</a></h3>
<p>We have a test workflow for testing and a pre-commit workflow for static type checking, linting, and formatting the code.
It is performed when a pull request is created against main.
If you would like to check them in local, the following commands are almost equivalent (the difference is that the test workflows are run under multiple Python versions).
Furthermore, these tasks are defined only in the <code class="docutils literal notranslate"><span class="pre">dev</span></code> environment. Pixi does not require you to specify the environment
in that case.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pixi</span> <span class="n">run</span> <span class="n">tests</span>
<span class="n">pixi</span> <span class="n">run</span> <span class="n">precommit</span> <span class="c1"># This runs pre-commit on all files.</span>
</pre></div>
</div>
</section>
<section id="creating-documentation">
<h3>Creating documentation<a class="headerlink" href="#creating-documentation" title="Link to this heading">#</a></h3>
<p>We also have a documentation workflow. However, if you want to locally create the documentation
run the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pixi<span class="w"> </span>run<span class="w"> </span>doc_build<span class="w"> </span><span class="c1"># this just creates the build</span>
pixi<span class="w"> </span>run<span class="w"> </span>doc_serve<span class="w"> </span><span class="c1"># build and serve at http://localhost:8000/</span>
</pre></div>
</div>
</section>
<section id="create-a-release">
<h3>Create a release<a class="headerlink" href="#create-a-release" title="Link to this heading">#</a></h3>
<p>This section is relevant only for maintainers.</p>
<ol class="arabic simple">
<li><p>Pull <code class="docutils literal notranslate"><span class="pre">git</span></code>’s <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pixi</span> <span class="pre">install</span> <span class="pre">-a</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pixi</span> <span class="pre">run</span> <span class="pre">-e</span> <span class="pre">dev</span> <span class="pre">pre-commit</span> <span class="pre">install</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pixi</span> <span class="pre">run</span> <span class="pre">tests</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pixi</span> <span class="pre">shell</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hatch</span> <span class="pre">version</span> <span class="pre">&lt;new-version&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">.</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-m</span> <span class="pre">&quot;ENH:</span> <span class="pre">Bump</span> <span class="pre">version</span> <span class="pre">to</span> <span class="pre">&lt;version&gt;&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hatch</span> <span class="pre">build</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hatch</span> <span class="pre">publish</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">upstream</span> <span class="pre">main</span></code></p></li>
<li><p>Create a new tag and Release via the GitHub UI. Auto-generate release notes
and add additional notes as needed.</p></li>
</ol>
<!-- References -->
<div class="toctree-wrapper compound">
</div>
</section>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#features">Features</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-usage">Basic usage</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-field">Data field</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coordinate-field">Coordinate field</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#attribute-field">Attribute field</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#name-field">Name field</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dataarray-class">DataArray class</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset-class">Dataset class</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-usage">Advanced usage</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coordof-and-dataof-type-hints">Coordof and Dataof type hints</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general-data-variable-names-in-dataset-creation">General data variable names in Dataset creation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#customization-of-dataarray-or-dataset-creation">Customization of DataArray or Dataset creation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dataarray-and-dataset-creation-without-shorthands">DataArray and Dataset creation without shorthands</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-contribute">How to contribute</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-the-source-code">Get the source code</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-dependencies">Install dependencies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-linting-and-formatting">Testing, linting, and formatting</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-documentation">Creating documentation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-release">Create a release</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  
  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025 Wouter-Michiel Vierdag.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  <script>
    // Add version information to the current page
    document.addEventListener('DOMContentLoaded', function() {
      // This helps search engines and other tools understand the version of the page
      var meta = document.createElement('meta');
      meta.name = 'version';
      meta.content = '';
      document.head.appendChild(meta);
    });
  </script>

  </body>
</html>